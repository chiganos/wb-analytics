<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>AI-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç Wildberries</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 30px; }
        h1 { color: #5b21b6; }
        select, button { padding: 8px; font-size: 16px; margin-top: 10px; }
        #results { margin-top: 30px; }
        .block { border: 1px solid #ccc; padding: 15px; margin-bottom: 20px; border-radius: 6px; }
    </style>
</head>
<body>
    <h1>üìä Wildberries –ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h1>

    <label for="article-select">–í—ã–±–µ—Ä–∏—Ç–µ –∞—Ä—Ç–∏–∫—É–ª:</label><br>
    <select id="article-select">
        {% for art in articles %}
            <option value="{{ art }}">{{ art }}</option>
        {% endfor %}
    </select>
    <button onclick="loadAnalytics()">–ü–æ–∫–∞–∑–∞—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É</button>

    <div id="results">
        <div class="block" id="sma-block">üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∫–æ–ª—å–∑—è—â–µ–≥–æ —Å—Ä–µ–¥–Ω–µ–≥–æ...</div>
        <div class="block" id="ads-baskets-block">üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ –≤–ª–∏—è–Ω–∏—è —Ä–µ–∫–ª–∞–º—ã –Ω–∞ –∫–æ—Ä–∑–∏–Ω—É...</div>
        <div class="block" id="ads-orders-block">üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ –≤–ª–∏—è–Ω–∏—è —Ä–µ–∫–ª–∞–º—ã –Ω–∞ –∑–∞–∫–∞–∑—ã...</div>
        <div class="block" id="price-orders-block">üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ –≤–ª–∏—è–Ω–∏—è —Ü–µ–Ω—ã –Ω–∞ –∑–∞–∫–∞–∑—ã...</div>
        <div class="block" id="price-optimization-block">üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ü–µ–Ω—ã...</div>
        <div class="block" id="conversion-block">üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ –∫–æ—Ä–∑–∏–Ω—ã...</div>
        <div class="block" id="keywords-block">üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ –∞–Ω–∞–ª–∏–∑–∞ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤...</div>
        <div class="block" id="ads-shows-baskets-block">üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ –≤–ª–∏—è–Ω–∏—è –ø–æ–∫–∞–∑–æ–≤ –Ω–∞ –∫–æ—Ä–∑–∏–Ω—ã...</div>
        <div class="block" id="cpm-shows-block">üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ –≤–ª–∏—è–Ω–∏—è CPM –Ω–∞ –ø–æ–∫–∞–∑—ã...</div>
        <div class="block" id="gpt-block">üîÑ –ó–∞–≥—Ä—É–∑–∫–∞ GPT-–∞–Ω–∞–ª–∏–∑–∞...</div>
    </div>

    <script>
        function loadAnalytics() {
            const art = document.getElementById("article-select").value;
            const blocks = {
                "sma-block": "/api/analytics/sma/",
                "ads-baskets-block": "/api/analytics/ads-baskets/",
                "ads-orders-block": "/api/analytics/ads-orders/",
                "price-orders-block": "/api/analytics/price-orders/",
                "price-optimization-block": "/api/analytics/price-optimization/",
                "conversion-block": "/api/analytics/price-conversion/",
                "keywords-block": "/api/analytics/keywords/",
                "ads-shows-baskets-block": "/api/analytics/ads-shows-baskets/",
                "cpm-shows-block": "/api/analytics/cpm-shows/",
                "gpt-block": "/api/analytics/gpt/"
            };

            for (const [blockId, endpoint] of Object.entries(blocks)) {
                const el = document.getElementById(blockId);
                if (!el) {
                    console.warn("‚ùå –ë–ª–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω:", blockId);
                    continue;
                }

                el.innerText = "üîÑ –ó–∞–≥—Ä—É–∑–∫–∞...";
                fetch(endpoint + art)
                    .then(resp => resp.text())
                    .then(data => {
                        el.innerHTML = data;
                    })
                    .catch(err => {
                        el.innerText = "‚ö†Ô∏è –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏";
                        console.error(err);
                    });
            }
        }
    </script>
</body>
</html>
